<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>FAT filesystem using SD-SPI driver - Harmony 3 core library application examples for PIC32CM MC00 family</title> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-2724382-16"); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>FAT filesystem using SD-SPI driver | Harmony 3 core library application examples for PIC32CM MC00 family</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="FAT filesystem using SD-SPI driver" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 core library application examples for PIC32CM MC00 family" /> <meta property="og:description" content="Harmony 3 core library application examples for PIC32CM MC00 family" /> <link rel="canonical" href="../../../apps/fs/sdspi_fat/readme.html" /> <meta property="og:url" content="../../../apps/fs/sdspi_fat/readme.html" /> <meta property="og:site_name" content="Harmony 3 core library application examples for PIC32CM MC00 family" /> <script type="application/ld+json"> {"@type":"WebPage","url":"../../../apps/fs/sdspi_fat/readme.html","headline":"FAT filesystem using SD-SPI driver","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"description":"Harmony 3 core library application examples for PIC32CM MC00 family","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="../../../mplab_harmony_license.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="../../../release_notes.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="../../../index.html" class="navigation-list-link">Harmony 3 core library application examples for PIC32CM MC00 family</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../../apps/driver/i2c/async/i2c_eeprom/readme.html" class="navigation-list-link">I2C driver asynchronous - I2C EEPROM</a></li><li class="navigation-list-item "><a href="../../../apps/driver/spi/async/spi_multi_slave/readme.html" class="navigation-list-link">SPI Driver asynchronous - multi client</a></li><li class="navigation-list-item "><a href="../../../apps/driver/usart/async/usart_echo/readme.html" class="navigation-list-link">USART driver asynchronous - UART echo</a></li><li class="navigation-list-item "><a href="../../../apps/driver/usart/sync/usart_echo/readme.html" class="navigation-list-link">USART driver synchronous - UART echo</a></li><li class="navigation-list-item "><a href="../../../apps/fs/nvm_fat/readme.html" class="navigation-list-link">FAT filesystem using NVM driver</a></li><li class="navigation-list-item active"><a href="../../../apps/fs/sdspi_fat/readme.html" class="navigation-list-link active">FAT filesystem using SD-SPI driver</a></li><li class="navigation-list-item "><a href="../../../apps/rtos/freertos/basic_freertos/readme.html" class="navigation-list-link">FreeRTOS basic</a></li><li class="navigation-list-item "><a href="../../../apps/system/console_debug/sys_console_debug_uart_read_write/readme.html" class="navigation-list-link">Console Debug System Service using UART</a></li><li class="navigation-list-item "><a href="../../../apps/system/time/sys_time_multiclient/readme.html" class="navigation-list-link">Time system service multi-client</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Harmony 3 core library application examples for PIC32CM MC00 family" aria-label="Search Harmony 3 core library application examples for PIC32CM MC00 family" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="https://support.microchip.com">Obtain Support from Microchip</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../index.html">Harmony 3 core library application examples for PIC32CM MC00 family</a></li> <li class="breadcrumb-nav-list-item"><span>FAT filesystem using SD-SPI driver</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="fat-filesystem-using-sd-spi-driver"> <a href="#fat-filesystem-using-sd-spi-driver" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> FAT filesystem using SD-SPI driver </h1> <p>This application shows an example of using the MPLAB Harmony File System to access and modify the contents of a SD card using the SDSPI driver and the SPI PLIB.</p> <h2 id="description"> <a href="#description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Description </h2> <h3 id="file-system-operations-on-the-sd-card"> <a href="#file-system-operations-on-the-sd-card" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> File System Operations on the SD Card: </h3> <ul> <li>Application opens a file named FILE_TOO_LONG_NAME_EXAMPLE_123.JPG in the root directory of the SD card and reads its content into memory</li> <li>Application creates directory named Dir1 in the root directory</li> <li>Application creates a new file named FILE_TOO_LONG_NAME_EXAMPLE_123.JPG inside Dir1</li> <li>Application copies the content from step 1 into this newly created file</li> </ul> <p>The reason for choosing a JPEG file for test purposes is that the duplicate file, Dir1/FILE_TOO_LONG_NAME_EXAMPLE_123.JPG created by the demonstration could be easily verified for correctness.If the new file inside Dir1 opens for viewing on the computer and matches to original image, the test is deemed to have passed. Otherwise, if the file does not open (i.e., is corrupted), the test will be considered to have failed.</p> <p>Note:</p> <p><em>Since the application creates a directory named Dir1, it is important that the a folder with the same name does not exist on the SD card. If a directory named Dir1 is already present on the SD card, the application will fail.</em></p> <h3 id="file-system-layer-uses"> <a href="#file-system-layer-uses" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> File system layer uses: </h3> <ul> <li>SDSPI Driver to communicate to SD Card over SPI interface.</li> </ul> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Downloading and building the application </h2> <p>To clone or download this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/core_apps_pic32cm_mc00">main page of this repository</a> and then click Clone button to clone this repository or download as zip file. This content can also be downloaded using content manager by following these <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">instructions</a>.</p> <p>Path of the application within the repository is <strong>apps/fs/sdspi_fat/firmware</strong> .</p> <p>To build the application, refer to the following table and open the project using its IDE.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>pic32cm_mc00_curiosity_pro.X</td> <td>MPLABX project for <a href="https://www.microchip.com/developmenttools/ProductDetails/">PIC32CM MC00 Curiosity Pro Evaluation Kit</a></td> </tr> <tr> <td> </td> <td> </td> </tr> </tbody> </table></div> <h2 id="setting-up-the-hardware"> <a href="#setting-up-the-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Setting up the hardware </h2> <p>The following table shows the target hardware for the application projects.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Project Name</th> <th style="text-align: center">Board</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">pic32cm_mc00_curiosity_pro.X</td> <td style="text-align: center"><a href="https://www.microchip.com/developmenttools/ProductDetails/">PIC32CM MC00 Curiosity Pro Evaluation Kit</a></td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: center"> </td> </tr> </tbody> </table></div> <h3 id="setting-up-pic32cm-mc00-curiosity-pro-evaluation-kit"> <a href="#setting-up-pic32cm-mc00-curiosity-pro-evaluation-kit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Setting up <a href="https://www.microchip.com/developmenttools/ProductDetails/">PIC32CM MC00 Curiosity Pro Evaluation Kit</a> </h3> <ul> <li>To run the demo, the following additional hardware are required: <ul> <li>One <a href="https://www.microchip.com/developmenttools/ProductDetails/ATIO1-XPRO">IO1 Xplained Pro Extension Kit</a></li> <li>One micro-sd card</li> </ul> </li> <li>Connect <a href="https://www.microchip.com/developmenttools/ProductDetails/ATIO1-XPRO">IO1 Xplained Pro Extension Kit</a> to the EXT1 header</li> <li>Insert the micro-SD Card in the micro-SD Card slot of the <a href="https://www.microchip.com/developmenttools/ProductDetails/ATIO1-XPRO">IO1 Xplained Pro Extension Kit</a></li> <li>Connect the Debug USB port on the board to the computer using a micro USB cable</li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Running the Application </h2> <ol> <li>Build and program the application using its IDE</li> <li>Press Switch to start the file operations</li> <li>The LED is turned ON if there was no error during creating the directory and copying the file into it</li> </ol> <p>Refer to the following table for switch and LED name:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Board</th> <th>Switch name</th> <th>LED Name</th> </tr> </thead> <tbody> <tr> <td><a href="https://www.microchip.com/developmenttools/ProductDetails/">PIC32CM MC00 Curiosity Pro Evaluation Kit</a></td> <td>SW0</td> <td>LED0</td> </tr> <tr> <td> </td> <td> </td> <td> </td> </tr> </tbody> </table></div> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0"><img src='../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2020 Microchip Technology.</p> </footer> </div> </div> </div> </div> </body> </html>
